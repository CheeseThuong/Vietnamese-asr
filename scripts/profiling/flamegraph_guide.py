"""
HÆ°á»›ng dáº«n sá»­ dá»¥ng Flamegraph Profiling trÃªn Windows
"""

print("="*70)
print("ğŸ”¥ FLAMEGRAPH PROFILING FOR WINDOWS")
print("="*70)

print("\nPyFlame (https://github.com/CTO92/PyFlame) lÃ  má»™t deep learning")
print("framework, KHÃ”NG PHáº¢I lÃ  profiling tool!")
print("\nÄá»ƒ cÃ³ flamegraph profiling trÃªn Windows, dÃ¹ng cÃ¡c tool sau:\n")

print("="*70)
print("OPTION 1: py-spy (KHUYáº¾N NGHá»Š - Dá»… nháº¥t, tá»‘t nháº¥t!)")
print("="*70)
print("\nğŸ“¦ CÃ i Ä‘áº·t:")
print("   pip install py-spy")
print("\nğŸ”¥ Sá»­ dá»¥ng:")
print("   # Profile script vÃ  táº¡o flamegraph")
print("   py-spy record -o flamegraph.svg -- python your_script.py")
print("   ")
print("   # Profile script Ä‘ang cháº¡y (láº¥y PID)")
print("   py-spy record -o flamegraph.svg --pid 12345")
print("   ")
print("   # Live view (real-time)")
print("   py-spy top -- python your_script.py")
print("\nâœ… Æ¯u Ä‘iá»ƒm:")
print("   - KhÃ´ng cáº§n sá»­a code")
print("   - Overhead tháº¥p (~1%)")
print("   - Táº¡o SVG flamegraph Ä‘áº¹p")
print("   - Cross-platform (Windows/Linux/Mac)")

print("\n" + "="*70)
print("OPTION 2: flameprof (DÃ¹ng vá»›i cProfile)")
print("="*70)
print("\nğŸ“¦ CÃ i Ä‘áº·t:")
print("   pip install flameprof")
print("\nğŸ”¥ Sá»­ dá»¥ng:")
print("   # Profile script")
print("   python -m cProfile -o profile.stats your_script.py")
print("   ")
print("   # Táº¡o flamegraph")
print("   flameprof profile.stats > flamegraph.svg")
print("   ")
print("   # Hoáº·c dÃ¹ng profiling_cpu.py cá»§a chÃºng ta:")
print("   from profiling_cpu import CPUProfiler")
print("   profiler = CPUProfiler()")
print("   profiler.start()")
print("   # your code")
print("   profiler.stop()  # Tá»± Ä‘á»™ng táº¡o flamegraph.svg")
print("\nâœ… Æ¯u Ä‘iá»ƒm:")
print("   - DÃ¹ng cProfile cÃ³ sáºµn")
print("   - Chi tiáº¿t hÆ¡n")
print("   - TÃ­ch há»£p vÃ o code dá»… dÃ ng")

print("\n" + "="*70)
print("OPTION 3: snakeviz (Interactive visualization)")
print("="*70)
print("\nğŸ“¦ CÃ i Ä‘áº·t:")
print("   pip install snakeviz")
print("\nğŸ”¥ Sá»­ dá»¥ng:")
print("   # Profile script")
print("   python -m cProfile -o profile.stats your_script.py")
print("   ")
print("   # Visualize (má»Ÿ browser)")
print("   snakeviz profile.stats")
print("\nâœ… Æ¯u Ä‘iá»ƒm:")
print("   - Interactive web UI")
print("   - Dá»… explore")
print("   - Sunburst/Icicle charts")

print("\n" + "="*70)
print("OPTION 4: PyInstrument (Simple & Clean)")
print("="*70)
print("\nğŸ“¦ CÃ i Ä‘áº·t:")
print("   pip install pyinstrument")
print("\nğŸ”¥ Sá»­ dá»¥ng:")
print("   # Command line")
print("   pyinstrument your_script.py")
print("   ")
print("   # In code")
print("   from pyinstrument import Profiler")
print("   profiler = Profiler()")
print("   profiler.start()")
print("   # your code")
print("   profiler.stop()")
print("   profiler.print()")
print("\nâœ… Æ¯u Ä‘iá»ƒm:")
print("   - Output Ä‘áº¹p, dá»… Ä‘á»c")
print("   - HTML report")
print("   - Sampling profiler (low overhead)")

print("\n" + "="*70)
print("ğŸ¯ RECOMMENDATION CHO Dá»° ÃN Cá»¦A Báº N")
print("="*70)
print("\n1. Cho development/debugging:")
print("   ğŸ‘‰ DÃ¹ng CPUProfiler trong profiling_cpu.py")
print("   ğŸ‘‰ CÃ i thÃªm: pip install flameprof")
print("   ğŸ‘‰ Sáº½ tá»± Ä‘á»™ng táº¡o flamegraph.svg")

print("\n2. Cho production/monitoring:")
print("   ğŸ‘‰ DÃ¹ng py-spy")
print("   ğŸ‘‰ pip install py-spy")
print("   ğŸ‘‰ Cháº¡y: py-spy record -o profile.svg -- python api_server.py")

print("\n3. Cho quick analysis:")
print("   ğŸ‘‰ DÃ¹ng PyInstrument")
print("   ğŸ‘‰ pip install pyinstrument")
print("   ğŸ‘‰ Cháº¡y: pyinstrument train_wav2vec2.py")

print("\n" + "="*70)
print("ğŸ“ DEMO: Profile training script")
print("="*70)
print("\n# CÃ¡ch 1: Sá»­ dá»¥ng py-spy (khÃ´ng cáº§n sá»­a code)")
print("py-spy record -o train_profile.svg -- python train_wav2vec2.py")

print("\n# CÃ¡ch 2: Sá»­ dá»¥ng profiling_cpu.py")
print("# ThÃªm vÃ o Ä‘áº§u train_wav2vec2.py:")
print("from profiling_cpu import CPUProfiler")
print("profiler = CPUProfiler()")
print("profiler.start()")
print("# ... existing code ...")
print("profiler.stop()  # Táº¡o flamegraph tá»± Ä‘á»™ng")

print("\n# CÃ¡ch 3: PyInstrument (simplest)")
print("pyinstrument train_wav2vec2.py")

print("\n" + "="*70)
print("âœ… Káº¿t luáº­n:")
print("="*70)
print("\nPyFlame (GitHub CTO92) KHÃ”NG PHáº¢I lÃ  profiling tool!")
print("NÃ³ lÃ  deep learning framework cho Cerebras WSE hardware.")
print("\nÄá»ƒ profile Python trÃªn Windows, dÃ¹ng:")
print("  1. py-spy (best for flamegraph)")
print("  2. flameprof (works with cProfile)")
print("  3. PyInstrument (simple & clean)")
print("  4. profiling_cpu.py (custom tool Ä‘Ã£ cÃ³ sáºµn)")
print("\n" + "="*70)

# Offer to install
print("\nğŸ“¦ Muá»‘n cÃ i ngay?")
print("   pip install py-spy pyinstrument flameprof snakeviz")
print("="*70)
